---
title: "内存占用量评估的结果"
description: "内存占用量评估的结果"
MSHAttr:
- PreferredSiteName:MSDN
- PreferredLib:/library/windows/hardware
ms.assetid: fd625d98-5d3a-401d-9639-516135f8d968
ms.prod: W10
ms.mktglfcycl: plan
ms.sitesec: msdn
ms.openlocfilehash: 19978b55118965547a8f33e0567f9a610d7b9741
ms.sourcegitcommit: d33e870dc4850bf0ea47fdae0d163b04c1c90f15
translationtype: MT
---
# <a name="results-for-the-memory-footprint-assessment"></a>内存占用量评估的结果


本主题有助于您理解产生的内存占用量评估的指标。 它还提供有关如何使用结果来识别和解决许多常见的对客户体验产生负面影响的问题的指导。 内存是一个关键的资源，并优化内存使用情况确保一致和响应迅速的用户体验。

此评估过程中的系统以及在 Windows 8 或 Windows 10 开始屏幕的外观后立即重启一系列创建内存使用快照。 它不在普通的计算机操作过程中计算内存的使用。 但是，可以使用的内存需求量的评估结果要了解内存的使用方式时启动应用程序之前。 很多进程和服务正在使用所有的时间和它们占用的内存。 此评估服务可帮助您的驱动程序和应用程序始终运行方式影响启动过程，请参阅。

**请注意**  
所评估的计算机应具有零售版本的驱动程序安装以获取准确的内存分配。

 

本主题︰

-   [目标文件](#bkmk-goals)

-   [指标](#bkmk-memorymetrics)

-   [问题](#bkmk-memoryissues)

有关评估、 系统要求以及评估设置的详细信息，请参阅[内存占用量](memory-footprint.md)。

## <a name="a-href-idbkmk-goalsagoals-file"></a><a href="" id="bkmk-goals"></a>目标文件


您可以创建自定义的目标来衡量结果视图中的您改进。 目标文件是会审的工具，可帮助您了解 PC 的性能如何，比较 Pc 业务中。

例如，基本的便携式计算机目标可能不同于为高端桌面计算机设置的目标或者市场预期可能会更改所需的灵活性，可以定义不同类型的目标和时间的推移和技术的关键要求提高的方式中。

度量值是与该指标的目标相比，状态都用颜色编码在结果视图中，如下所示︰

-   浅紫色意味着系统具有出色的用户体验，有没有感觉到的问题。

-   紫色的中等意味着用户体验是容许，可以优化系统。 检查以查看可对系统进行何种改进的建议和分析。 这可能是软件更改，更改配置或硬件更改。

-   深紫色意味着系统有很差的用户体验，并且有重大改进的空间。 检查以查看可对系统进行改进的建议和分析。 这可能是软件更改，更改配置或硬件更改。 您可能需要考虑进行权衡，以便提供 Windows 遇到的高质量。

-   没有颜色的含义有没有定义为度量的目标。

**请注意**  
在 Windows 评估 Toolkit 针对 Windows 8，某些评估包括默认目标文件。 查看使用此版本的工具，结果在第一次使用该默认目标文件。 但是，您还可以定义自定义目标针对 Windows 8 相同的方式，可以为 Windows 8.1 和 Windows 10。

 

您可以设置文件位置的目标并将目标文件添加到该位置之前可用于用户界面应用的自定义目标。 选择目标文件后，它将继续是目标文件，用于打开的任何结果。

可每次只能有一个目标文件。 所有的评估的目标是单个目标文件中设置的。 评估工具将搜索顺序如下目标︰

1.  自定义的目标文件

2.  在结果文件中定义的目标

3.  评估清单中定义的目标

您可以在 %PROGRAMFILES%使用提供了该示例的目标文件\\窗口工具包\\10\\评估和部署工具包\\Windows 评估 Toolkit\\SDK\\样本\\目标来创建目标文件。

**请注意**  
不能包装作业的目标文件，但可以将其存储在供其他用户使用共享。

 

## <a name="a-href-idbkmk-memorymetricsametrics"></a><a href="" id="bkmk-memorymetrics"></a>指标


多种因素会影响计算机的内存使用情况。 这些因素包括体系结构、 物理内存、 操作系统、 图形配置、 计算机类、 语言和网络连接的版本。 内存占用量是一个程序使用或运行时引用的物理内存量。 内存占用量包含下列内容︰

-   二进制文件、 动态链接库 (Dll) 和其他可执行文件加载到内存

-   动态分配，包括堆/VA

-   驱动程序分配，主要是在池、 符号表和堆栈

通过了解计算机的内存占用量，可以识别方法可以提高性能和效率。 优化内存创建一个更高效、 更可扩展的操作系统，增加了可用于应用程序和流程，并提高了性能更高或不断增加的工作负载下的内存。

此评估重点是系统内存的下列用法︰

-   在启动过程中提供的页面缓冲的池、 非页面缓冲池和驱动程序锁定页面的驱动程序分配。

-   由启动应用程序、 防病毒程序和其他软件的动态分配。 这些保留在内存中启动，在系统稳定时。

**在使用内存的优化**

内存的使用会影响性能，因为计算机可以访问更多的代码和数据不是可在物理内存中的 ﬁt。 例如︰

-   物理内存总量是系统上的 RAM 总量。

-   可用内存是此所需的系统和引导应用程序加载到内存后对用户的应用程序可用的 RAM 的一部分。

-   在使用内存包含启动完成后桌面或开始屏幕出现时所运行的所有内容。

内存占用量评估枚举来帮助驱动程序制造商正在使用内存中的内容和系统构建者优化它们所创建的计算机的系统性能。 评估突出显示驱动程序和引导应用程序的内存的分配。

使用中的内存包括多个 Windows 系统进程。 可以使用此评估服务来了解什么是引导后在内存中。 然后，您可以尝试降低或消除类别中某些不必要或过度的内存资源分配，工作集、 非分页内存，和已修改的页。 优化使用中的内存量已经移位，影响发布到类别中可用内存的内存。 这增加了自由和备用类别中的内存数量。 下表描述了这些类别。

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>总内存类别</th>
<th>内存使用的子类别</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>总内存</p></td>
<td><p>在使用内存 + 可用内存</p></td>
</tr>
<tr class="even">
<td><p>使用内存</p></td>
<td><p>工作集 + 非分页内存 + 已修改的页</p></td>
</tr>
<tr class="odd">
<td><p>可用内存</p></td>
<td><p>备用内存 + 可用内存</p></td>
</tr>
</tbody>
</table>

 

内存占用量评估提供更详细的说明内存使用任务管理器相比。

此评估所产生的指标显示系统内存使用情况的定量概述。 这些度量标准的一些有额外的内存参数可以通过**分组依据**下拉列表展开公开。 以下指标来度量内存占用量评估过程。

### <a name="available-memory"></a>可用内存

中总兆字节，如下所示在任务管理器中启动后的可用内存。 可用内存是使用中减去总内存。 这包括可用内存、 备用内存和备用列表页。

### <a name="memory-in-use"></a>正在使用的内存

非分页内存 （兆字节） 和进程工作集或修改过的工作集中在任何分配的总和。

### <a name="standby-memory"></a>备用内存

备用内存 （兆字节）。 应用程序需要它成为可用备用内存。 备用页的值被缓存的数据以及在内存中，但不是在使用中的文件的数量。

### <a name="total-memory"></a>总内存

总可用内存 （兆字节），启动后显示在任务管理器中。 总页数为操作系统分配其份额后可见的 RAM。

### <a name="driver-paged-allocations"></a>驱动程序的分页分配

**最适用于︰**驱动程序开发人员 Oem

驱动程序开发人员可能会影响此编号与驱动程序的实现的方式。 Oem 可以通过添加或卸下系统中的设备会影响这个数字。

这是由驱动程序分配和后盾的分页文件的内存。 这意味着无法换出到磁盘，以便腾出一些其他代码或数据，而且以后通过硬错误检索内存。 此指标只由该驱动程序分配的数据并不包括所需驱动程序加载到内存的内存空间。 有关可分页代码的详细信息，请参阅[驱动程序的分页代码](#memmetrics-driverpagedcode)。

**详细的子指标**

评估将由会话中出现细分这些内存分配。 系统使用会话 0 的系统服务和进程。 第一个用户会话是会话 1。 非会话包含到任何单个会话无关的系统分配。

**典型的影响因素**

Oem 可以通过更换硬件或软件驱动程序具有更低的内存需求影响该指标。 另外，Oem 可以减少系统上的设备的数量。 Oem 应该知道什么驱动程序是系统和他们所使用的内存。

**分析和补救措施**

驱动程序供应商通过他或她设计了驱动程序的方式有最大程度上此指标的影响。 提供了分配系统中收取所有驱动程序的列表。 另外驱动程序供应商可以提供 WPA 跟踪 （存储在相同的目录的评估结果） 为此评估。 这些可以用于查找的大量内存分配到减少内存使用的候选区域。

### <a name="driver-non-paged-allocations"></a>驱动程序未分页分配

**最适用于︰**驱动程序开发人员 Oem

驱动程序开发人员可能会影响此编号与驱动程序的实现的方式。 Oem 可以通过添加或卸下系统中的设备会影响这个数字。

此统计数据非常相似与分页分配的但这些分配使用不会分页的物理内存。 这反映了已固定，并且因此不可分页的内存或被其他进程和服务使用的物理内存。 获取太多非分页内存减少了页面可以使用的内存量备份内存。

非页面缓冲分配有时所需的驱动程序的数据结构，它需要在中断服务例程 (Isr) 的执行过程中访问和延迟的过程调用 (Dpc) 的内存。 Isr 和 Dpc 是功能与硬件中断和页面错误不能执行这些函数时出现。 因此，驱动程序需要分配非页面缓冲池在这些数据结构以避免任何崩溃。

**详细的子指标**

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>子的跃点计数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>驱动程序锁定系统页</p></td>
<td><p>这是内存是从分页内存中加载，然后锁定由驱动程序，直到它不再有用。 此示例会偶尔使用调制解调器等设备。 没有加载此设备的所有代码，直到它在使用，那么一些代码和数据需要被锁定，因此它不能调出点。</p></td>
</tr>
<tr class="even">
<td><p>连续</p></td>
<td><p>这是非分页的连续内存。 必须锁定某些代码加载到内核地址空间中，因此，它不调出。 这是在驱动程序中的 bug 的常见根源。 系统必须能够响应硬件中断而无需转到页面文件生成的代码路径。</p>
<p>驱动程序锁定系统页面引用内存描述符列表 (MDL)。 MDL 是系统定义的结构，它描述的一组物理地址的缓冲区。 执行直接 I/O 驱动程序收到 I/O 管理器中，指针 MDL 和读取和写入数据通过 MDL。 在执行直接 I/O，以满足设备 I/O 控制请求时，某些驱动程序还使用 MDLs。 Microsoft Windows 内存管理器构造 MDL 读取设备，它会锁定用于传输目标的物理页面。 但是，将仅由内存管理器以确定哪些页到保留，哪些 （如果有的话） 放弃。</p></td>
</tr>
<tr class="odd">
<td><p>前任</p></td>
<td><p>这是内存的留用于执行代码区域中分配执行非页面缓冲的池内存。</p></td>
</tr>
<tr class="even">
<td><p>NX</p></td>
<td><p>非页面缓冲池的一种引进即非可执行文件 （NX 池）。 由于非可执行文件，它本质上是与可执行非页面缓冲池 （非页面缓冲池） 相比更加安全，并提供更好的保护，免受任何溢出攻击。</p></td>
</tr>
</tbody>
</table>

 

**典型的影响因素**

Oem 可以通过更换具有较低的内存要求的硬件或软件驱动程序会影响该指标。

**分析和补救措施**

驱动程序供应商的驱动程序的设计的方式有最大程度上此指标的影响。 查找结果显示在控制台窗口中评估中较大的内存分配。 另外的驱动程序供应商可以提供 WPA 跟踪 （存储评估结果与同一目录中） 来查找要到减少内存使用的候选区域的大量内存分配此评估服务。

### <a name="a-href-idmemmetrics-driverpagedcodeadriver-paged-code"></a><a href="" id="memmetrics-driverpagedcode"></a>驱动程序的分页代码

**最适用于︰**驱动程序开发人员 Oem

驱动程序供应商已在此指标上的影响最大。 Oem 可以通过更换具有较低的内存要求的硬件和软件驱动程序会影响该指标。

这是内存中分配用于分页的驱动程序代码。 越多，这样的可能性就越大，它的一些调出到磁盘，需要硬错误将它放回需要时。 这可能会导致用户体验有显著的影响。 此外高内存分配会导致操作系统也是 pagable 的常用代码页。 调出，更大的风险硬错误会以通常将带回更多使用的代码。

**详细的子指标**

这是内存的列表中的二进制文件和以千字节计算分配量。 可以按大小排序列表，用鼠标右键单击"大小"头上，然后选择"升序排序"。

**典型的影响因素**

Oem 可以通过更换具有较低的内存要求的硬件或软件驱动程序会影响该指标。

**分析和补救措施**

驱动程序供应商的驱动程序的设计的方式有最大程度上此指标的影响。 查找结果显示在控制台窗口中评估中较大的内存分配。 另外驱动程序供应商可以提供这一评估要查找的大量内存分配到减少内存使用的候选区域的 WPA 的痕迹 （存储在相同的目录的评估结果）。 Oem 应该考虑更换设备或获取更新的驱动程序。

### <a name="driver-non-paged-code"></a>驱动程序未分页代码

**最适用于︰**驱动程序开发人员 Oem

驱动程序供应商已在此指标上的影响最大。 Oem 可以通过更换具有更低的内存需求的硬件驱动程序会影响该指标。

该指标是内存的符合目标的分配并不能换出到分页文件量。 这包括为代码，不用于数据分配的内存。 这反映了永久正在使用中，因此不可分页的内存中的物理内存。

**详细的子指标**

这是内存的列表中的二进制文件和以千字节计算分配量。 通过**大小**头上右击并选择**按降序排序**，可以按大小排序列表。

**典型的影响因素**

Oem 可以通过更换具有较低的内存要求的硬件或软件驱动程序会影响该指标。

**分析和补救措施**

驱动程序供应商的驱动程序的设计的方式有最大程度上此指标的影响。 查找结果显示在控制台窗口中评估中较大的内存分配。 另外驱动程序供应商可以提供这一评估要查找的大量内存分配到减少内存使用的候选区域的 WPA 的痕迹 （存储在相同的目录的评估结果）。

### <a name="process-private-pages"></a>进程私有页

**最适用于︰**Oem

Oem 可以通过减少"始终运行"应用程序 （应用程序运行的注册表项中或在启动文件夹） 的数量影响该指标。 Oem 应该寻找初始 Microsoft 图像的顶部添加了这些软件。

内存是共享或非共享 （即 专用）。 通过分配或内存备份文件分配内存时如何无关紧要。 例如如果您打开两个 Microsoft Word 文档因为可以两个实例之间共享内存 （代码） 的某些应用程序是相同的。 但在 word 文档中的数据是不同的因此，每个实例都需要为其分配的专用内存。 进程私有页指标显示下钻中列出每个二进制组件分配专用内存量。 此统计数据不包括共享的内存。

共享的内存是分配，分配给进程的内存。 如果内核获取有关此内存，它可以通过简单地重复使用已分配的内存的快速响应新的请求。 但这必须是只读存储器以保持其状态为"共享"一个块。 一旦一个或另一进程想要编写新块必须分配给共享内存和内核"写"请求使用新的块。 无论多少内存写入内核必须分配至少一个内存块的请求。 因此，即使我们想要共享内存中写入一个字节，因此它需要分配一个 4KB 块的内存块中用于处理内核。

**详细的子指标**

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>子的跃点计数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>激活</p></td>
<td><p>这是二进制文件和其所占的总内存使用的列表。 此内存是活动的。</p></td>
</tr>
<tr class="even">
<td><p>待机</p></td>
<td><p>这是二进制文件和其所占的总内存使用的列表。 此备用列表即内存仍在物理内存中，但已被标记为不再需要的内存。 这就是第一次将会替换为新的内存，内存管理器调进或向前到活动列表，如果需要的内存。</p></td>
</tr>
</tbody>
</table>

 

**典型的影响因素**

Oem 可以通过更换具有更低的内存需求的软件驱动程序会影响该指标。

**分析和补救措施**

驱动程序和软件供应商通过其代码的设计的方式有最大程度上此指标的影响。 查找结果显示在控制台窗口中评估中较大的内存分配。 此外，软件供应商可以提供这一评估要查找的大量内存分配到减少内存使用的候选区域的 WPA 的痕迹 （存储在相同的目录的评估结果）。 仔细分析的分配，即使是小的帮助开发人员查找分配添加到。

### <a name="binaries-in-use"></a>二进制文件 （正在使用）

**最适用于︰**Oem

OEM 可以通过添加或移除设备从系统影响这个数字。 另外，某些软件和服务使用内核模式驱动程序。 寻找软件中启动路径或始终运行软件和服务。 软件本身可能不会显示较大的内存分配，但过程将有可能具有较大内存需求的相关性。

这是已分配给它们的使用内存的二进制文件的列表。 这是另一种方法来查看其他指标中显示的数据。 这是与某个特定的二进制文件相关联的所有分配。

**详细的子指标**

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>子的跃点计数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>激活</p></td>
<td><p>这是二进制文件和其所占的总内存使用的列表。 此内存正在使用中。</p></td>
</tr>
<tr class="even">
<td><p>待机</p></td>
<td><p>这是二进制文件和其所占的总内存使用的列表。 此备用列表即内存仍在物理内存中，但已被标记为不再需要的内存。 这就是第一次将会替换为新的内存，内存管理器调进或向前到活动列表，如果需要的内存。</p></td>
</tr>
</tbody>
</table>

 

**典型的影响因素**

Oem 可以通过更换具有较低的内存要求的硬件或软件驱动程序会影响该指标。 另外，Oem 可以减少系统上的设备的数量。

**分析和补救措施**

驱动程序供应商的驱动程序的设计的方式有最大程度上此指标的影响。 查找结果显示在控制台窗口中评估中较大的内存分配。 另外驱动程序供应商可以提供这一评估要查找的大量内存分配到减少内存使用的候选区域的 WPA 的痕迹 （存储在相同的目录的评估结果）。

### <a name="map-files"></a>映射文件

**最适用于︰**Oem、 软件供应商

Oem 可以通过添加或卸下系统中的设备会影响这个数字。 另外，某些软件和服务使用内核模式驱动程序。 软件供应商可能会影响该指标通过寻找其他方法来实现一个功能，不会使用内存映射文件。

这是使用内存映射 I/O 的二进制文件的列表。 这是所有与某个特定的二进制文件关联的内存映射内存。 它包括代码和相关联的数据 （共享和非共享） 使用特定的二进制文件。 大内存映射文件可以具有性能的负面影响。

**详细的子指标**

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>子的跃点计数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>激活</p></td>
<td><p>这是二进制文件和其所占的总内存使用的列表。 此内存正在使用中。</p></td>
</tr>
<tr class="even">
<td><p>待机</p></td>
<td><p>这是二进制文件和其所占的总内存使用的列表。 此备用列表即内存仍在物理内存中，但已被标记为不再需要的内存。 这就是第一次将会替换为新的内存，内存管理器调进或向前到活动列表，如果需要的内存。</p></td>
</tr>
</tbody>
</table>

 

**典型的影响因素**

Oem 可以通过更换具有较低的内存要求的硬件或软件驱动程序会影响该指标。 另外，Oem 可以减少系统上的设备的数量。 请考虑减少的唯一一次运行的进程数。

**分析和补救措施**

大分配的内存映射到磁盘上的位置不能参与任何由内存管理器提供的优化。 驱动程序供应商的驱动程序的设计的方式有最大程度上此指标的影响。 查找结果显示在控制台窗口中评估中较大的内存分配。 另外驱动程序供应商可以提供这一评估要查找的大量内存分配到减少内存使用的候选区域的 WPA 的痕迹 （存储在相同的目录的评估结果）。

## <a name="a-href-idbkmk-memoryissuesaissues"></a><a href="" id="bkmk-memoryissues"></a>问题


没有特定生成的内存占用量评估问题。 此评估提供了仅度量标准来帮助分析的内存值，因为一个系统配置中显示其结果可能会因此不同于另一个。 最佳使用此评估是确定驱动程序、 进程或应用程序使用的内存太多。 您还可以使用此评估是要比较两个或多个计算机的内存需求量。

**请注意**  
此评估使用的符号，以确保其结果显示驱动程序分配而不是内核分配驱动程序内存。 不使用符号时，评估分析可能会错误地识别内存分配源。 有关缺少符号和评估准确性的详细信息，请参阅[In-Depth 分析的常见问题](common-in-depth-analysis-issues.md)。

 

### <a name="the-assessment-reports-an-exit-code-of-0x80050006"></a>评估报告的退出代码为 0x80050006

维护任务已注册的电脑上，但尚未完成之前运行的评估时，将发生此错误。 为维护任务通常会影响评估指标，这样可以防止运行，这样的评估。

要解决此问题，请执行以下任一操作︰

1.  确保计算机已连接到网络和交流电源供电运行。 手动启动，请使用以下命令从提升提示符挂起的维护任务︰

    `rundll32.exe advapi32.dll,ProcessIdleTasks`

2.  禁用定期和空闲状态维护任务，并在运行评估之前停止所有的维护任务。

### <a name="recommendations-for-driver-and-software-vendors"></a>驱动程序和软件供应商的建议

-   使用完成工作所需的最小内存。

-   只是您需要当您需要它，并完成后立即将其释放的内存中加载。

-   知道您可以加载内存并使用相应的 Api 的各种方法。

-   确定是否驱动程序代码或数据需要驻留在物理 RAM 或如果它可以允许传入和传出呼叫。

-   了解分页文件，它的工作原理，以及它的影响将对您的方案。

-   请不要创建服务多个设备的单一驱动程序。 保持较小的驱动程序并解决不仅仅是它所服务的设备的问题。

### <a name="recommendations-for-oems"></a>Oem 的建议

-   请参阅驱动程序和软件部署之前安装在干净的图像的影响。

-   有关他们的软件，它们可以减少对内存的影响最新版本，请咨询您的驱动程序和软件供应商。

-   请考虑使用不同的驱动程序或软件供应商联系，向您提供对系统内存的低影响的功能类似。

## <a name="related-topics"></a>相关的主题


[内存占用量](memory-footprint.md)

[Windows 评估 Toolkit](index.md)

[评估服务](assessments.md)

[评估 Windows 控制台的分步指南](windows-assessment-console-step-by-step-guide.md)

[MSDN: Windows 内存管理](http://go.microsoft.com/fwlink/?LinkId=271597)

 

 







