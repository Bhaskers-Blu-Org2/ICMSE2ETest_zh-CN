---
title: "内存占用量优化"
description: "在系统上可用的内存量显著影响用户体验。"
MSHAttr:
- PreferredSiteName:MSDN
- PreferredLib:/library/windows/hardware
ms.assetid: 8ECD1B28-D98A-406D-8920-BC205D3A1729
ms.prod: W10
ms.mktglfcycl: operate
ms.sitesec: msdn
ms.openlocfilehash: e7e8ca172a9a24b2e9eb91f5aa287e8f18592c28
ms.sourcegitcommit: d33e870dc4850bf0ea47fdae0d163b04c1c90f15
translationtype: MT
---
# <a name="memory-footprint-optimization"></a>内存占用量优化


在系统上可用的内存量显著影响用户体验。 从系统的总体响应速度到电池使用寿命等方面影响。 可用内存是内容的评估低内存设备上的完整体验时要考虑的一个重要因素，Windows 严重依赖分页和交换的内存中。

本指南将指导您逐步与内存相关的性能问题分析并确定根本原因，无论它是一个驱动程序或用户模式进程，使用**Windows 性能 Toolkit**。 包括以下主题︰

-   驱动程序和应用程序占用的空间

-   工作集和驻留集

-   池内存分配

-   堆和 VirtualAlloc 内存分配

## <a name="goals"></a>目标


本指南将向您展示如何执行以下任务︰

-   使用**Windows 性能记录器 (WPR)**收集与内存相关的问题的痕迹。

-   使用评估和部署工具包 (ADK) 内存占用量评估收集内存使用率比较基准。

-   分析驱动程序的分页/非页面缓冲池内存的使用情况。

-   分析工作集和驻留集的进程。

-   了解如何以及何时通过驱动程序和过程动态地分配内存。

## <a name="tools"></a>工具


在过去，内核调试程序以及大量晦涩命令必须用于发现数据和文件页面当前占用的物理内存。 现在，您可以使用**Windows 性能 Toolkit (WPT)**收集并通过内置的 Windows 检测更易于理解和可操作的形式显示此信息。

**WPT**包括**Windows 性能分析器 (WPA)**和**Windows 性能记录器 (WPR)**。

在 ADK Windows 评估 Toolkit 还可以用于获取内存占用量评估。 此评估过程中一系列的系统重启和桌面可见后立即创建内存使用的快照。 它不在普通的计算机操作过程中计算内存的使用。

ADK **Windows 评估控制台 (WAC)**是用来进行评估，生成视觉性能报告的工具。

## <a name="terminology"></a>术语


| 术语                            | 定义                                                                                                                                                                                                                             |
|---------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **可共享的页面**              | 一个或多个进程可以使用的页。 例如，可执行映像 （.dll、.exe 和.cpl） 中的代码页或数据文件页 （.txt、.doc 等）。                                                                           |
| **专用的页面**               | 以独占方式由单一的页面处理，通常包含动态分配的数据如堆或 VirtualAlloc。                                                                                                          |
| **进程工作集**         | 页集最近由进程引用，并且包含专用和共享页。                                                                                                                                              |
| **处理私人工作集** | 最近由进程所引用的专用非可共享的页面的集合。                                                                                                                                                                    |
| **可用**                   | 在系统上立即可供使用的进程的内存量。 此统计数据由待机列表上的页面不需要写入到永久存储区之前他们可以由其他进程改变用途的。 |

 

## <a name="exercises"></a>练习


本指南包括以下练习。

-   [练习 1-标识具有较大的工作的进程集](memory-footprint-optimization-exercise-1.md)

-   [练习 2-跟踪用户模式进程分配](memory-footprint-optimization-exercise-2.md)

-   [练习 3-跟踪驱动程序占用空间和启动过程的动态分配](memory-footprint-optimization-exercise-3.md)

 

 






